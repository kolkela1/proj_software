{% extends 'base.html' %}

{% block title %}تسجيل الغياب{% endblock %}

{% block content %}
<div class="row mb-3">
    <div class="col">
        <h2>تسجيل الغياب - {{ lesson['class_name'] }} ({{ lesson['lesson_date'] }})</h2>
    </div>
</div>

<form method="post">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>اسم الطالب</th>
                <th>الحالة</th>
                <th>درجة المشاركة</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student['name'] }}</td>
                <td>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="status_{{ student['id'] }}" value="present"
                            {{ 'checked' if student['status']=='present' or not student['status'] }}>
                        <label class="form-check-label">حضور</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="status_{{ student['id'] }}" value="absent"
                            {{ 'checked' if student['status']=='absent' }}>
                        <label class="form-check-label">غياب</label>
                    </div>
                </td>
                <td>
                    <input type="number" step="0.5" name="score_{{ student['id'] }}" class="form-control"
                        style="width: 80px;" value="{{ student['score'] if student['score'] else 0 }}">
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="3" class="text-center">لا يوجد طلاب في هذه المجموعة.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="mt-3">
        <button type="submit" class="btn btn-primary">حفظ الغياب</button>
        <a href="{{ url_for('lessons.index') }}" class="btn btn-secondary">عودة</a>
    </div>
</form>
{% endblock %}